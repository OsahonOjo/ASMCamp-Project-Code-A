<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using create-react-app" />

    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
    <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" crossorigin="anonymous"/>

    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <style>
        body {
            background-color: #22303c;
            /* color: #ddd; */
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>

    <title>ASMCamp</title>
    <script src="https://www.facebook.com/assets.php/en_US/fbinstant.latest.js"></script>
    
    <!-- <script data-main="app" src="lib/require.js"></script> -->

    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->

    <!--
      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
 
    <div id="root"></div>

    <script>
        const initialLearningTrackProgress = {
            "63c819463074896247a739e8": {
                "id": "63c819463074896247a739e8",
                "coursesCompletedIds": [
                    "",
                    ""
                ],
                "coursesNotCompletedIds": [
                    "63c97f224370423bc6305cf8",
                    "63c9831b4370423bc6305cfa"
                ],
                "nCourses": 2,
                "totalTrackXP": 2200,
                "totalXPEarned": 1100,
                "badgesEarnedIds": []
            },
            "63c81af43074896247a739ea": {
                "id": "63c81af43074896247a739ea",
                "coursesCompletedIds": [
                    "",
                    ""
                ],
                "coursesNotCompletedIds": [
                    "63c983934370423bc6305cfb",
                    "63c984104370423bc6305cfc"
                ],
                "nCourses": 2,
                "totalTrackXP": 1900,
                "totalXPEarned": 900,
                "badgesEarnedIds": []
            }
        };
        const initialCourseProgress = {
            "63c97f224370423bc6305cf8": {
                "id": "63c97f224370423bc6305cf8",
                "learningTrackId": "63c819463074896247a739e8",
                "seqNumber": 1,
                "topicsCompletedIds": [
                    "",
                    ""
                ],
                "topicsNotCompletedIds": [
                    "63c985e730e8bf226256a771",
                    "63c989d430e8bf226256a772"
                ],
                "nTopics": 2,
                "totalCourseXP": 1200,
                "totalXPEarned": 600
            },
            "63c9831b4370423bc6305cfa": {
                "id": "63c9831b4370423bc6305cfa",
                "learningTrackId": "63c819463074896247a739e8",
                "seqNumber": 2,
                "topicsCompletedIds": [
                    "",
                    ""
                ],
                "topicsNotCompletedIds": [
                    "63c98a4430e8bf226256a773",
                    "63c98be530e8bf226256a774"
                ],
                "nTopics": 2,
                "totalCourseXP": 1000,
                "totalXPEarned": 500
            },
            "63c983934370423bc6305cfb": {
                "id": "63c983934370423bc6305cfb",
                "learningTrackId": "63c81af43074896247a739ea",
                "seqNumber": 1,
                "topicsCompletedIds": [
                    "",
                    ""
                ],
                "topicsNotCompletedIds": [
                    "63c98c9e30e8bf226256a775",
                    "63c98d0e30e8bf226256a776"
                ],
                "nTopics": 2,
                "totalCourseXP": 900,
                "totalXPEarned": 500
            },
            "63c984104370423bc6305cfc": {
                "id": "63c984104370423bc6305cfc",
                "learningTrackId": "63c81af43074896247a739ea",
                "seqNumber": 2,
                "topicsCompletedIds": [
                    "",
                    ""
                ],
                "topicsNotCompletedIds": [
                    "63c98d9930e8bf226256a777",
                    "63c98e1530e8bf226256a778"
                ],
                "nTopics": 2,
                "totalCourseXP": 1000,
                "totalXPEarned": 400
            }
        };
        const initialTopicProgress = {
            "63c985e730e8bf226256a771": {
                "id": "63c985e730e8bf226256a771",
                "learningTrackId": "63c819463074896247a739e8",
                "courseId": "63c97f224370423bc6305cf8",
                "seqNumber": 1,
                "topicItemsCompleted": [
                    {
                        "id": "63c999a6816a63733f9e5020",
                        "topicId": "63c985e730e8bf226256a771",
                        "seqNumber": 1,
                        "xp": 100
                    },
                    {
                        "id": "63c9a1177bb6281924271667",
                        "topicId": "63c985e730e8bf226256a771",
                        "seqNumber": 2,
                        "xp": 100
                    },
                    {
                        "id": "63c9a4d57bb6281924271668",
                        "topicId": "63c985e730e8bf226256a771",
                        "seqNumber": 3,
                        "xp": 100
                    },
                    {},
                    {},
                    {}
                ],
                "topicItemsNotCompleted": [
                    {},
                    {},
                    {},
                    {
                        "id": "63c9a6017bb6281924271669",
                        "topicId": "63c985e730e8bf226256a771",
                        "seqNumber": 4,
                        "xp": 100
                    },
                    {
                        "id": "63c9a8a27bb628192427166a",
                        "topicId": "63c985e730e8bf226256a771",
                        "seqNumber": 5,
                        "xp": 100
                    },
                    {
                        "id": "63f030d599068642d69dbf61",
                        "topicId": "63c985e730e8bf226256a771",
                        "seqNumber": 6,
                        "xp": 200
                    }
                ],
                "nTopicItems": 6,
                "totalTopicXP": 700,
                "totalXPEarned": 300
            },
            "63c98a4430e8bf226256a773": {
                "id": "63c98a4430e8bf226256a773",
                "learningTrackId": "63c819463074896247a739e8",
                "courseId": "63c9831b4370423bc6305cfa",
                "seqNumber": 1,
                "topicItemsCompleted": [
                    {
                        "id": "63daddb285de99359e543fc6",
                        "topicId": "63c98a4430e8bf226256a773",
                        "seqNumber": 1,
                        "xp": 100
                    },
                    {
                        "id": "63dade3f85de99359e543fc7",
                        "topicId": "63c98a4430e8bf226256a773",
                        "seqNumber": 2,
                        "xp": 100
                    },
                    {},
                    {},
                    {}
                ],
                "topicItemsNotCompleted": [
                    {},
                    {},
                    {
                        "id": "63dadf1285de99359e543fc8",
                        "topicId": "63c98a4430e8bf226256a773",
                        "seqNumber": 3,
                        "xp": 100
                    },
                    {
                        "id": "63dadfc485de99359e543fc9",
                        "topicId": "63c98a4430e8bf226256a773",
                        "seqNumber": 4,
                        "xp": 100
                    },
                    {
                        "id": "63dae0eb85de99359e543fca",
                        "topicId": "63c98a4430e8bf226256a773",
                        "seqNumber": 5,
                        "xp": 100
                    }
                ],
                "nTopicItems": 5,
                "totalTopicXP": 500,
                "totalXPEarned": 200
            },
            "63c989d430e8bf226256a772": {
                "id": "63c989d430e8bf226256a772",
                "learningTrackId": "63c819463074896247a739e8",
                "courseId": "63c97f224370423bc6305cf8",
                "seqNumber": 2,
                "topicItemsCompleted": [
                    {
                        "id": "63d93910a9be3fda3923259b",
                        "topicId": "63c989d430e8bf226256a772",
                        "seqNumber": 1,
                        "xp": 100
                    },
                    {},
                    {},
                    {
                        "id": "63dadc1685de99359e543fc5",
                        "topicId": "63c989d430e8bf226256a772",
                        "seqNumber": 4,
                        "xp": 100
                    },
                    {
                        "id": "63d93b56a9be3fda3923259d",
                        "topicId": "63c989d430e8bf226256a772",
                        "seqNumber": 5,
                        "xp": 100
                    }
                ],
                "topicItemsNotCompleted": [
                    {},
                    {
                        "id": "63d9398fa9be3fda3923259c",
                        "topicId": "63c989d430e8bf226256a772",
                        "seqNumber": 2,
                        "xp": 100
                    },
                    {
                        "id": "63dadae085de99359e543fc4",
                        "topicId": "63c989d430e8bf226256a772",
                        "seqNumber": 3,
                        "xp": 100
                    },
                    {},
                    {}
                ],
                "nTopicItems": 5,
                "totalTopicXP": 500,
                "totalXPEarned": 300
            },
            "63c98be530e8bf226256a774": {
                "id": "63c98be530e8bf226256a774",
                "learningTrackId": "63c819463074896247a739e8",
                "courseId": "63c9831b4370423bc6305cfa",
                "seqNumber": 2,
                "topicItemsCompleted": [
                    {
                        "id": "63dae1bd85de99359e543fcb",
                        "topicId": "63c98be530e8bf226256a774",
                        "seqNumber": 1,
                        "xp": 100
                    },
                    {},
                    {
                        "id": "63daf5605e651ec3bc28b937",
                        "topicId": "63c98be530e8bf226256a774",
                        "seqNumber": 3,
                        "xp": 100
                    },
                    {
                        "id": "63daf6aa5e651ec3bc28b938",
                        "topicId": "63c98be530e8bf226256a774",
                        "seqNumber": 4,
                        "xp": 100
                    },
                    {}
                ],
                "topicItemsNotCompleted": [
                    {},
                    {
                        "id": "63daf3535e651ec3bc28b936",
                        "topicId": "63c98be530e8bf226256a774",
                        "seqNumber": 2,
                        "xp": 100
                    },
                    {},
                    {},
                    {
                        "id": "63daf76f5e651ec3bc28b939",
                        "topicId": "63c98be530e8bf226256a774",
                        "seqNumber": 5,
                        "xp": 100
                    }
                ],
                "nTopicItems": 5,
                "totalTopicXP": 500,
                "totalXPEarned": 300
            },
            "63c98c9e30e8bf226256a775": {
                "id": "63c98c9e30e8bf226256a775",
                "learningTrackId": "63c81af43074896247a739ea",
                "courseId": "63c983934370423bc6305cfb",
                "seqNumber": 1,
                "topicItemsCompleted": [
                    {
                        "id": "63daf86a5e651ec3bc28b93a",
                        "topicId": "63c98c9e30e8bf226256a775",
                        "seqNumber": 1,
                        "xp": 100
                    },
                    {
                        "id": "63daf9be5e651ec3bc28b93b",
                        "topicId": "63c98c9e30e8bf226256a775",
                        "seqNumber": 2,
                        "xp": 100
                    },
                    {},
                    {},
                    {}
                ],
                "topicItemsNotCompleted": [
                    {},
                    {},
                    {
                        "id": "63daface5e651ec3bc28b93c",
                        "topicId": "63c98c9e30e8bf226256a775",
                        "seqNumber": 3,
                        "xp": 100
                    },
                    {
                        "id": "63dafb9d5e651ec3bc28b93d",
                        "topicId": "63c98c9e30e8bf226256a775",
                        "seqNumber": 4,
                        "xp": 100
                    },
                    {
                        "id": "63dafcaa5e651ec3bc28b93e",
                        "topicId": "63c98c9e30e8bf226256a775",
                        "seqNumber": 5,
                        "xp": 100
                    }
                ],
                "nTopicItems": 5,
                "totalTopicXP": 500,
                "totalXPEarned": 200
            },
            "63c98d9930e8bf226256a777": {
                "id": "63c98d9930e8bf226256a777",
                "learningTrackId": "63c81af43074896247a739ea",
                "courseId": "63c984104370423bc6305cfc",
                "seqNumber": 1,
                "topicItemsCompleted": [
                    {
                        "id": "63dafdbe5e651ec3bc28b93f",
                        "topicId": "63c98d9930e8bf226256a777",
                        "seqNumber": 1,
                        "xp": 100
                    },
                    {},
                    {},
                    {
                        "id": "63db01425e651ec3bc28b942",
                        "topicId": "63c98d9930e8bf226256a777",
                        "seqNumber": 4,
                        "xp": 100
                    },
                    {}
                ],
                "topicItemsNotCompleted": [
                    {},
                    {
                        "id": "63dafe955e651ec3bc28b940",
                        "topicId": "63c98d9930e8bf226256a777",
                        "seqNumber": 2,
                        "xp": 100
                    },
                    {
                        "id": "63daffc05e651ec3bc28b941",
                        "topicId": "63c98d9930e8bf226256a777",
                        "seqNumber": 3,
                        "xp": 100
                    },
                    {},
                    {
                        "id": "63db02775e651ec3bc28b943",
                        "topicId": "63c98d9930e8bf226256a777",
                        "seqNumber": 5,
                        "xp": 100
                    }
                ],
                "nTopicItems": 5,
                "totalTopicXP": 500,
                "totalXPEarned": 200
            },
            "63c98d0e30e8bf226256a776": {
                "id": "63c98d0e30e8bf226256a776",
                "learningTrackId": "63c81af43074896247a739ea",
                "courseId": "63c983934370423bc6305cfb",
                "seqNumber": 2,
                "topicItemsCompleted": [
                    {
                        "id": "63f3e8fa4588e11d5165e2ee",
                        "topicId": "63c98d0e30e8bf226256a776",
                        "seqNumber": 1,
                        "xp": 100
                    },
                    {
                        "id": "63f3eacb4588e11d5165e2f5",
                        "topicId": "63c98d0e30e8bf226256a776",
                        "seqNumber": 2,
                        "xp": 100
                    },
                    {},
                    {
                        "id": "63f3ebe84588e11d5165e30d",
                        "topicId": "63c98d0e30e8bf226256a776",
                        "seqNumber": 4,
                        "xp": 100
                    }
                ],
                "topicItemsNotCompleted": [
                    {},
                    {},
                    {
                        "id": "63f3eb7c4588e11d5165e302",
                        "topicId": "63c98d0e30e8bf226256a776",
                        "seqNumber": 3,
                        "xp": 100
                    },
                    {}
                ],
                "nTopicItems": 4,
                "totalTopicXP": 400,
                "totalXPEarned": 300
            },
            "63c98e1530e8bf226256a778": {
                "id": "63c98e1530e8bf226256a778",
                "learningTrackId": "63c81af43074896247a739ea",
                "courseId": "63c984104370423bc6305cfc",
                "seqNumber": 2,
                "topicItemsCompleted": [
                    {
                        "id": "63e953a1bb2d1504366aa7b6",
                        "topicId": "63c98e1530e8bf226256a778",
                        "seqNumber": 1,
                        "xp": 100
                    },
                    {},
                    {
                        "id": "63e956d2bb2d1504366aa7b8",
                        "topicId": "63c98e1530e8bf226256a778",
                        "seqNumber": 3,
                        "xp": 100
                    },
                    {},
                    {}
                ],
                "topicItemsNotCompleted": [
                    {},
                    {
                        "id": "63e9548abb2d1504366aa7b7",
                        "topicId": "63c98e1530e8bf226256a778",
                        "seqNumber": 2,
                        "xp": 100
                    },
                    {},
                    {
                        "id": "63e95897bb2d1504366aa7b9",
                        "topicId": "63c98e1530e8bf226256a778",
                        "seqNumber": 4,
                        "xp": 100
                    },
                    {
                        "id": "63e95a57bb2d1504366aa7ba",
                        "topicId": "63c98e1530e8bf226256a778",
                        "seqNumber": 5,
                        "xp": 100
                    }
                ],
                "nTopicItems": 5,
                "totalTopicXP": 500,
                "totalXPEarned": 200
            }
        };

        const PLAYER_IMAGE_HEIGHT = "100px";
        const PLAYER_IMAGE_WIDTH = "100px";
    
        // TODO: remove these in production version
        window.LearningTrackProgress = initialLearningTrackProgress;
        window.CourseProgress = initialCourseProgress;
        window.TopicProgress = initialTopicProgress;
        console.log("initial progress data: ", { 
            LearningTrackProgress: window.LearningTrackProgress,
            CourseProgress: window.CourseProgress,
            TopicProgress: window.TopicProgress
        });

        // testing link: https://www.facebook.com/embed/instantgames/599022965028716/player?game_url=https://localhost:8080
        window.FBInstant
            .initializeAsync()
            .then(function() {
                console.log("initializeAsync() has resolved");

                let playerId = window.FBInstant.player.getID();  // mine: "4638749739494803"
                let playerName = window.FBInstant.player.getName();
                let contextType = window.FBInstant.context.getType();  // enum: "POST" | "THREAD" | "GROUP" | "SOLO"
                let playerImageURL = window.FBInstant.player.getPhoto();  // returns url to the player's public profile photo                

                let playerImage = new Image();  // creates new HTMLImageElement, equivalent to document.createElement('img')
                playerImage.crossOrigin = 'anonymous';  // to prevent photo from being tainted due to CORS
                playerImage.src = playerImageURL;
                playerImage.height = PLAYER_IMAGE_HEIGHT;  // always scale the image to a desired size before rendering
                playerImage.width = PLAYER_IMAGE_WIDTH;

                console.log("player ID [type]: ", playerId, typeof playerId);
                console.log("player info: ", { playerId, playerName, playerImageURL, contextType });

                // load progress and rewards data
                window.FBInstant.player
                    .getDataAsync(['LearningTrackProgress', 'CourseProgress', 'TopicProgress'])
                    .then(function(data) {
                        console.log("getDataAsync() has resolved; data: ", data);
                        if (data['LearningTrackProgress']) {
                            window.LearningTrackProgress = data['LearningTrackProgress'];
                            window.CourseProgress = data['CourseProgress'];
                            window.TopicProgress = data['TopicProgress'];
                        }
                        else {
                            // TODO: initialize these to {} in production version
                            window.LearningTrackProgress = initialLearningTrackProgress;
                            window.CourseProgress = initialCourseProgress;
                            window.TopicProgress = initialTopicProgress;
                        }
                        window.FBInstant.setLoadingProgress(100);
                        window.FBInstant.startGameAsync().then(console.log("startGameAsync() has resolved: game started"));
                    });
            })
            .catch(function(err) {
                console.log("error in initializeAsync(): ", err);
            });
    </script>
  </body>
</html>

<!--
    The one true React.js boilerplate
    https://gist.github.com/kentcdodds/5274dfa1eb31e6d22b9eddd1efc773dc

    <body>
        <div id="root"></div>
        <script crossorigin src="https://unpkg.com/react@16.0.0/umd/react.development.js"></script>
        <script crossorigin src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.development.js"></script>
        <script crossorigin src="https://unpkg.com/react-router-dom@6/dist/umd/react-router-dom.development.js"></script>
        <script crossorigin src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
        <script type="text/babel">
            ReactDOM.render(<div>Hello World!</div>, document.getElementById('root'))
        </script>
    </body>
-->